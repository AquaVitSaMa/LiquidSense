package me.aquavit.liquidsense.utils.forge;

import me.aquavit.liquidsense.utils.item.ItemUtils;
import net.minecraft.creativetab.CreativeTabs;
import net.minecraft.init.Blocks;
import net.minecraft.init.Items;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;

import java.util.List;
import java.util.Objects;

public class ExploitsTab extends CreativeTabs {

    /**
     * Initialize of exploits tab
     */
    public ExploitsTab() {
        super("Exploits");
        this.setBackgroundImageName("item_search.png");
    }

    /**
     * @return searchbar status
     */
    @Override
    public boolean hasSearchBar() {
        return true;
    }

    /**
     * Return name of tab
     *
     * @return tab name
     */
    @Override
    public String getTranslatedTabLabel() {
        return "Exploits";
    }

    /**
     * Return icon item of tab
     *
     * @return icon item
     */
    @Override
    public Item getTabIconItem() {
        return new ItemStack(Items.potionitem).getItem();
    }

    /**
     * Add all items to tab
     *
     * @param itemList list of tab items
     */
    @Override
    public void displayAllReleventItems(List<ItemStack> itemList) {
        // Create troll potion
        ItemStack trollPotion = new ItemStack(Items.potionitem);
        trollPotion.setItemDamage(16395);
        NBTTagList trollPotionEffects = new NBTTagList();

        for (int i = 1;i <= 27;++i) {
            NBTTagCompound effect = new NBTTagCompound();
            effect.setInteger("Amplifier", Integer.MAX_VALUE);
            effect.setInteger("Duration", Integer.MAX_VALUE);
            effect.setInteger("Id", i);
            trollPotionEffects.appendTag(effect);
        }

        trollPotion.setTagInfo("CustomPotionEffects", trollPotionEffects);
        trollPotion.setStackDisplayName("§c§lTroll§6§lPotion");
        itemList.add(trollPotion);

        // Create kill potion
        ItemStack killPotion = new ItemStack(Items.potionitem);
        killPotion.setItemDamage(16395);
        NBTTagCompound effect = new NBTTagCompound();
        effect.setInteger("Amplifier", 125);
        effect.setInteger("Duration", 1);
        effect.setInteger("Id", 6);
        NBTTagList effects = new NBTTagList();
        effects.appendTag(effect);
        killPotion.setTagInfo("CustomPotionEffects", effects);
        killPotion.setStackDisplayName("§c§lKill§6§lPotion");
        itemList.add(killPotion);

        // Create crash anvil for mc 1.8
        ItemStack crashAnvil = new ItemStack(Blocks.anvil);
        crashAnvil.setStackDisplayName("§8Crash§c§lAnvil §7| §cmc1.8-mc1.8");
        crashAnvil.setItemDamage(16384);
        itemList.add(crashAnvil);

        // Create crashhead for mc 1.10
        ItemStack crashHead = new ItemStack(Items.skull);
        NBTTagCompound compound = new NBTTagCompound();
        compound.setString("SkullOwner", " ");
        crashHead.setTagCompound(compound);
        crashHead.setStackDisplayName("§8Crash§6§lHead §7| §cmc1.8-mc1.10");
        itemList.add(crashHead);

        // Create crashstand for mc 1.10
        itemList.add(ItemUtils.createItem("armor_stand 1 0 {EntityTag:{Equipment:[{},{},{},{},{id:\"skull\",Count:1b,Damage:3b,tag:{SkullOwner:\"Test\"}}]}}").setStackDisplayName("§8Crash§2§lStand §7| §cmc1.10"));

        // Create lag sign
        StringBuilder lagStringBuilder = new StringBuilder();
        for(int i = 0; i <= 499; ++i) {
            lagStringBuilder.append("/(!§()%/§)=/(!§()%/§)=/(!§()%/§)=");
        }

        itemList.add(ItemUtils.createItem("sign 1 0 {BlockEntityTag:{Text1:\"{\\\"text\\\":\\\"$lagStringBuilder\\\"}\",Text2:\"{\\\"text\\\":\\\"$lagStringBuilder\\\"}\",Text3:\"{\\\"text\\\":\\\"$lagStringBuilder\\\"}\",Text4:\"{\\\"text\\\":\\\"$lagStringBuilder\\\"}\"}}").setStackDisplayName("§8Lag§2§lSign §7| §cmc1.8"));

        // Create spawn eggs of special mobs
        itemList.add(ItemUtils.createItem("spawn_egg 1 64"));
        itemList.add(ItemUtils.createItem("spawn_egg 1 63"));
        itemList.add(ItemUtils.createItem("spawn_egg 1 53"));

        // Create lag tag
        itemList.add(ItemUtils.createItem("name_tag 1 0 {display:{Name: \"$lagStringBuilder\"}}"));

        // Create infinity firework
        itemList.add(Objects.requireNonNull(ItemUtils.createItem("fireworks 1 0 {HideFlags:63,Fireworks:{Flight:127b,Explosions:[0:{Type:0b,Trail:1b,Colors:[16777215,],Flicker:1b,FadeColors:[0,]}]}}")).setStackDisplayName("§cInfinity §a§lFirework"));

        // Create enderdragon loop item
        itemList.add(Objects.requireNonNull(ItemUtils.createItem("chest 1 0 {BlockEntityTag:{Items:[0:{Slot:0b, id:\"minecraft:mob_spawner\",Count:64b,tag:{BlockEntityTag:{EntityId:\"FallingSand\",MaxNearbyEntities:1000,RequiredPlayerRange:100,SpawnCount:100,SpawnData:{Motion:[0:0.0d,1:0.0d,2:0.0d],Block:\"mob_spawner\",Time:1,Data:0,TileEntityData:{EntityId:\"FallingSand\",MaxNearbyEntities:1000,RequiredPlayerRange:100,SpawnCount:100,SpawnData:{Motion:[0:0.0d,1:0.0d,2:0.0d],Block:\"mob_spawner\",Time:1,Data:0,TileEntityData:{EntityId:\"EnderDragon\",MaxNearbyEntities:1000,RequiredPlayerRange:100,SpawnCount:100,MaxSpawnDelay:20,SpawnRange:100,MinSpawnDelay:20},DropItem:0},MaxSpawnDelay:20,SpawnRange:500,MinSpawnDelay:20},DropItem:0},MaxSpawnDelay:5,SpawnRange:500,Delay:20,MinSpawnDelay:5}},Damage:0s}],value:\"Chest\",Lock:\"\"}}")).setStackDisplayName("§c§lEnder§c§a§lDragon §bSpawner Chest"));
    }
}
